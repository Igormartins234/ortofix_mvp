    <!DOCTYPE html>
    <html lang="pt-BR">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrtoFix - Desafio de Acentua√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
        --color-primary: #4A90E2;
        --color-primary-dark: #357ABD;
        --color-accent: #50E3C2;
        --color-background: #F4F7FA;
        --color-text-dark: #2c3e50;
        --color-text-light: #8492a6;
        --color-card-bg: #ffffff;
        }
        body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--color-background);
        color: var(--color-text-dark);
        background-image: radial-gradient(circle at top, #ffffff 0%, var(--color-background) 80%);
        }
        .navbar-logo { width: 40px; height: auto; }
        .notification-badge {
        position: absolute; top: 0; right: 0;
        width: 12px; height: 12px; background-color: #EF4444;
        border-radius: 50%; border: 2px solid var(--color-primary-dark);
        animation: pulse 2s infinite cubic-bezier(0.66, 0, 0, 1);
        }
        @keyframes pulse {
        0%,100%{transform:scale(.9);box-shadow:0 0 0 0 rgba(239,68,68,.7);}
        50%{transform:scale(1.1);box-shadow:0 0 0 8px rgba(239,68,68,0);}
        }
        /* Anima√ß√£o para elementos que surgem */
        @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up {
        animation: fadeInUp 0.5s ease-out forwards;
        }
    </style>
    </head>
    <body class="bg-[#e3ebf2] min-h-screen flex flex-col">

    <!-- üîπ NAVBAR -->
    <header class="header-nav sticky top-0 z-50">
    <nav class="bg-[#3c6a99] text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 py-2 flex justify-between items-center">
        <!-- Bot√£o menu lateral -->
        <div class="relative">
            <button id="menu-btn" type="button" class="p-2 rounded-full hover:bg-white/10">
            <i data-lucide="menu"></i>
            </button>
            <div id="dropdown-menu" class="absolute left-0 mt-3 bg-white rounded-lg shadow-xl py-2 w-56 hidden z-[60]">
            <a href="inicio.html" class="flex items-center gap-3 px-4 py-2 text-[var(--color-text-dark)] hover:bg-gray-100">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Painel Principal
            </a>
            <a href="#" id="sound-btn" class="flex items-center gap-3 px-4 py-2 text-[var(--color-text-dark)] hover:bg-gray-100">
                <i data-lucide="volume-2" class="w-5 h-5"></i> Som
            </a>
            <a href="notificacoes.html" class="flex items-center gap-3 px-4 py-2 text-[var(--color-text-dark)] hover:bg-gray-100">
                <i data-lucide="bell-ring" class="w-5 h-5"></i> Notifica√ß√µes
            </a>
            <a href="configuracoes.html" class="flex items-center gap-3 px-4 py-2 text-[var(--color-text-dark)] hover:bg-gray-100">
                <i data-lucide="settings" class="w-5 h-5"></i> Configura√ß√µes
            </a>
            <hr class="my-1 border-gray-200">
            <a href="../index.html" class="flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50">
                <i data-lucide="log-out" class="w-5 h-5"></i> Sair
            </a>
            </div>
        </div>
        <!-- Logo -->
        <a href="inicio.html"><img src="../static/img/ortofix.png" alt="OrtoFix Logo" class="navbar-logo"></a>
        <!-- √çcones direita -->
        <div class="flex items-center gap-2">
            <div class="relative">
            <button id="notifications-btn" class="p-2 rounded-md hover:bg-white/10">
                <i data-lucide="bell" class="text-[#e3ebf2]"></i>
                <span class="notification-badge" id="notification-indicator"></span>
            </button>
            <div id="notifications-dropdown" class="absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-xl hidden z-[60]">
                <div class="p-3 border-b border-gray-200">
                <h3 class="text-sm font-semibold text-[#3c6a99]">Notifica√ß√µes Recentes</h3>
                </div>
                <div class="max-h-80 overflow-y-auto">
                <a href="#" class="block px-4 py-3 hover:bg-[#e3ebf2] text-gray-600 text-sm">Nenhuma notifica√ß√£o nova</a>
                </div>
            </div>
            </div>
            <a href="perfil.html" class="p-2 rounded-full hover:bg-white/10"><i data-lucide="user-circle" class="text-[#e3ebf2]"></i></a>
        </div>
        </div>
    </nav>
    </header>

    <!-- üîπ CONTE√öDO PRINCIPAL APRIMORADO -->
    <main class="container mx-auto px-4 py-8 sm:py-12 flex-grow">

    <!-- Cabe√ßalho da P√°gina -->
    <div class="text-center mb-8 fade-in-up">
        <h1 class="text-4xl md:text-5xl font-bold text-[var(--color-text-dark)] mb-2 tracking-tight">
        Desafio de Acentua√ß√£o
        </h1>
        <p class="text-lg text-[var(--color-text-light)] max-w-2xl mx-auto">
        Selecione o acento correto para cada palavra e teste seus conhecimentos!
        </p>
    </div>

    <!-- √Årea do Jogo (inicialmente oculta) -->
    <div id="formArea" class="bg-white/60 backdrop-blur-xl rounded-2xl shadow-lg p-6 sm:p-8 max-w-4xl mx-auto hidden">
        <form id="form">
        <!-- Grid para as palavras -->
        <div id="inputsArea" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Os inputs das palavras ser√£o gerados aqui pelo JavaScript -->
        </div>

        <!-- Bot√µes de A√ß√£o -->
        <div class="flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t border-slate-200">
            <button type="submit" class="flex items-center justify-center gap-2 bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] text-white px-6 py-3 rounded-lg w-full font-semibold shadow-md transition-transform transform hover:scale-105">
            <i data-lucide="send" class="w-5 h-5"></i>
            <span>Verificar Respostas</span>
            </button>
            <button type="button" id="btnNovas" class="flex items-center justify-center gap-2 bg-white border border-gray-300 hover:bg-gray-100 text-gray-700 px-6 py-3 rounded-lg w-full font-semibold transition-transform transform hover:scale-105">
            <i data-lucide="refresh-cw" class="w-5 h-5"></i>
            <span>Novas Palavras</span>
            </button>
        </div>
        </form>
    </div>

    <!-- √Årea de Feedback (inicialmente oculta) -->
    <div id="feedbackArea" class="max-w-4xl mx-auto hidden">
        <div class="text-center mb-6">
            <h2 class="text-3xl font-bold text-[var(--color-text-dark)]">Seu Desempenho</h2>
        </div>
        <div id="feedbackCards" class="space-y-4">
        <!-- Os cart√µes de feedback ser√£o gerados aqui -->
        </div>
        <!-- üëá BOT√ÉO ADICIONADO AQUI üëá -->
        <div class="text-center mt-8">
            <button id="btnJogarNovamente" class="flex items-center justify-center gap-2 mx-auto bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] text-white px-8 py-3 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                <i data-lucide="refresh-cw" class="w-5 h-5"></i>
                <span class="font-semibold">Jogar Novamente</span>
            </button>
        </div>
    </div>

    <!-- Bot√£o de Iniciar (vis√≠vel no in√≠cio) -->
    <div id="startArea" class="text-center mt-8">
        <button id="btnIniciar" class="bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] text-white px-8 py-4 rounded-xl shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300">
        <span class="text-xl font-bold">Come√ßar a Jogar!</span>
        </button>
    </div>
    </main>


    <footer class="bg-[#3c6a99] text-[#e3ebf2] border-t border-gray-200 mt-auto">
        <div class="container mx-auto py-2 px-4 text-center text-text-muted text-sm">
            <div class="flex items-center justify-center gap-2">
                <p>&copy; 2025 OrtoFix</p>
                <img src="../static/img/ortofix.png" alt="OrtoFix Logo" 
                    class="h-6" style="filter: brightness(0) invert(1);">
            </div>
        </div>
    </footer>

        
    <!-- üîπ SONS -->
    <audio id="click-sound" src="/static/audio/click.wav" preload="auto"></audio>
    <audio id="submit-sound" src="/static/audio/confirm.wav" preload="auto"></audio>

    <!-- üîπ SCRIPT UNIFICADO -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // Inicializa todos os √≠cones da p√°gina
        lucide.createIcons();

        // --- L√ìGICA DOS MENUS DROPDOWN (PAINEL E NOTIFICA√á√ïES) ---
        const menuBtn = document.getElementById("menu-btn");
        const dropdownMenu = document.getElementById("dropdown-menu");
        const notificationsBtn = document.getElementById("notifications-btn");
        const notificationsDropdown = document.getElementById("notifications-dropdown");

        const setupDropdown = (btn, menu) => {
            btn.addEventListener("click", (event) => {
                event.stopPropagation();
                const isHidden = menu.classList.contains("hidden");
                // Fecha todos os outros menus antes de abrir o novo
                document.querySelectorAll('.absolute.z-\\[60\\]').forEach(m => m.classList.add('hidden'));
                if (isHidden) {
                    menu.classList.remove("hidden");
                }
            });
        };
        setupDropdown(menuBtn, dropdownMenu);
        setupDropdown(notificationsBtn, notificationsDropdown);

        // Fecha os menus se o usu√°rio clicar em qualquer outro lugar da p√°gina
        document.addEventListener("click", () => {
            document.querySelectorAll('.absolute.z-\\[60\\]').forEach(m => m.classList.add('hidden'));
        });


        // --- L√ìGICA DO BOT√ÉO DE SOM ---
        const soundBtn = document.getElementById("sound-btn");
        const clickSound = document.getElementById("click-sound");
        const submitSound = document.getElementById("submit-sound");
        let soundEnabled = true; // O som come√ßa habilitado

        if (soundBtn && clickSound) {
            soundBtn.addEventListener("click", (event) => {
                event.preventDefault(); 
                soundEnabled = !soundEnabled;
                const icon = soundBtn.querySelector("i");
                if (soundEnabled) {
                    icon.setAttribute("data-lucide", "volume-2");
                    icon.classList.remove("text-red-500");
                } else {
                    icon.setAttribute("data-lucide", "volume-x");
                    icon.classList.add("text-red-500");
                }
                lucide.createIcons();
            });
        }
        
        // Adiciona som de clique a todos os bot√µes e links
        document.querySelectorAll("a, button").forEach(el => {
            el.addEventListener("click", () => {
                 if (soundEnabled && clickSound && !el.closest('#form')) {
                    clickSound.currentTime = 0;
                    clickSound.play().catch(err => {});
                }
            });
        });

        // --- L√ìGICA DO JOGO DE ACENTUA√á√ÉO ---
        const API_URL = "https://api-tcc-alpha.vercel.app";

        const btnIniciar = document.getElementById('btnIniciar');
        const btnNovas = document.getElementById('btnNovas');
        const formArea = document.getElementById('formArea');
        const feedbackArea = document.getElementById('feedbackArea');
        const feedbackCards = document.getElementById('feedbackCards');
        const inputsArea = document.getElementById('inputsArea');
        const form = document.getElementById('form');
        const startArea = document.getElementById('startArea');

        let palavrasAtuais = [];

        async function gerarPalavras() {
            try {
                // Mostra um estado de carregamento (opcional)
                inputsArea.innerHTML = '<p class="text-center md:col-span-2 text-gray-500">Gerando novas palavras...</p>';
                formArea.classList.remove('hidden');
                feedbackArea.classList.add('hidden');
                
                const res = await fetch(`${API_URL}/api/ortofix/gerar_palavras`, { method: 'POST' });
                if (!res.ok) throw new Error('Falha ao buscar palavras da API.');
                const data = await res.json();
                palavrasAtuais = data.palavras;
                renderInputs(palavrasAtuais);
            } catch (error) {
                inputsArea.innerHTML = `<p class="text-center md:col-span-2 text-red-500">Erro: ${error.message}</p>`;
            }
        }

        function renderInputs(palavras) {
            inputsArea.innerHTML = '';
            palavras.forEach((palavra, index) => {
                const div = document.createElement('div');
                div.className = 'bg-white/80 p-5 rounded-xl shadow-inner transition-all duration-300 hover:shadow-md';
                div.innerHTML = `
                    <label class="block text-sm font-medium text-gray-500 mb-2">Palavra ${index + 1}</label>
                    <p class="text-2xl font-bold text-[var(--color-text-dark)] mb-3">${palavra}</p>
                    <input type="hidden" name="palavra_${index}" value="${palavra}" />
                    <select name="acento_${index}" required class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition">
                        <option value="" disabled selected>Escolha um acento...</option>
                        <option value="agudo">Agudo (¬¥)</option>
                        <option value="circunflexo">Circunflexo (^)</option>
                        <option value="til">Til (~)</option>
                        <option value="sem acento">Sem acento</option>
                    </select>
                `;
                inputsArea.appendChild(div);
            });
            formArea.classList.add('fade-in-up');
            lucide.createIcons();
        }

        function renderFeedback(feedbackRaw) {
            const linhas = feedbackRaw.trim().split('\n').filter(l => l.trim() !== '');
            const cards = [];
            let card = {};
            linhas.forEach(linha => {
                if (linha.startsWith('- Palavra:')) { if (Object.keys(card).length > 0) { cards.push(card); card = {}; } card.palavra = linha.replace('- Palavra:', '').trim(); }
                else if (linha.startsWith('- Sua resposta:')) { card.resposta = linha.replace('- Sua resposta:', '').trim(); }
                else if (linha.startsWith('- Resposta correta:')) { card.correta = linha.replace('- Resposta correta:', '').trim(); }
                else if (linha.startsWith('- Resultado:')) { card.resultado = linha.replace('- Resultado:', '').trim(); }
                else if (linha.startsWith('- Explica√ß√£o:')) { card.explicacao = linha.replace('- Explica√ß√£o:', '').trim(); }
            });
            if (Object.keys(card).length > 0) { cards.push(card); }

            feedbackCards.innerHTML = ''; 

            cards.forEach(c => {
                const isCorrect = c.resultado && c.resultado.includes('Correto');
                const cardClass = isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50';
                const icon = isCorrect ? '<i data-lucide="check-circle-2" class="w-6 h-6 text-green-600"></i>' : '<i data-lucide="x-circle" class="w-6 h-6 text-red-600"></i>';
                const resultClass = isCorrect ? 'text-green-700' : 'text-red-700';

                const cardHTML = `
                    <div class="border-l-4 ${cardClass} rounded-r-lg p-5 shadow-sm fade-in-up bg-white">
                        <div class="flex items-start gap-4">
                            <div>${icon}</div>
                            <div class="flex-grow">
                                <p class="text-xl font-bold text-[var(--color-text-dark)]">${c.palavra}</p>
                                <p class="text-sm text-gray-600 mt-2">
                                    Voc√™ respondeu <span class="font-semibold">${c.resposta}</span>, mas o correto era <span class="font-semibold">${c.correta}</span>.
                                </p>
                                <p class="font-semibold mt-1 ${resultClass}">${c.resultado}</p>
                                <p class="text-sm text-gray-500 mt-3 pt-3 border-t border-gray-200">
                                    <strong>Explica√ß√£o:</strong> ${c.explicacao}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                feedbackCards.innerHTML += cardHTML;
            });

            feedbackArea.classList.remove('hidden');
            feedbackArea.classList.add('fade-in-up');
            lucide.createIcons();
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
             if (soundEnabled && submitSound) {
            submitSound.currentTime = 0;
            submitSound.play().catch(err => {});
        }
        const respostas = [];
            palavrasAtuais.forEach((_, index) => {
                const palavra = form.querySelector(`input[name="palavra_${index}"]`).value;
                const resposta = form.querySelector(`select[name="acento_${index}"]`).value;
                respostas.push({ palavra, resposta_usuario: resposta });
            });

            try {
                const res = await fetch(`${API_URL}/api/ortofix/verificar`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ respostas })
                });
                if (!res.ok) throw new Error('Falha ao verificar respostas.');
                const data = await res.json();
                renderFeedback(data.feedback);
                formArea.classList.add('hidden'); // Esconde o formul√°rio para mostrar s√≥ o feedback
            } catch (error) {
                feedbackCards.innerHTML = `<p class="text-center text-red-500">Erro: ${error.message}</p>`;
                feedbackArea.classList.remove('hidden');
            }
        });

        btnIniciar.addEventListener('click', () => {
            gerarPalavras();
            startArea.classList.add('hidden');
        });


        btnNovas.addEventListener('click', gerarPalavras);
        btnJogarNovamente.addEventListener('click', gerarPalavras);
    });
    </script>

    </body>
    </html>